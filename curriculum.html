<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta content="viewport-fit=cover, width=device-width, initial-scale=1" name="viewport">
    <meta content="師大附中1481班 課表" name="description">
    <link href="icon.jpg" rel="icon" type="image/ico">
    <meta content="yes" name="apple-mobile-web-app-capable">
    <meta content="black-translucent" name="apple-mobile-web-app-status-bar-style">
    <link href="icon.jpg" rel="apple-touch-icon">
    <link href="icon.jpg" rel="apple-touch-startup-image">
    <title>1481 課表</title>
    <link href="https://www.w3schools.com/w3css/4/w3.css" rel="stylesheet">
    <link href="css/curriculum.css" rel="stylesheet" type="text/css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.9.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/gh/moment/moment@2.24.0/moment.min.js"></script>
</head>
<body>
    <div class="content">
        <!-- Navigation -->
        <div class="w3-bar w3-border-bottom">
            <a class="w3-bar-item w3-button" href="/"><span style="color: black !important; word-spacing: 1px;">HSNU</span> <b class="BlueGradient" style="color: royalblue;">1481</b></a> <a class="w3-bar-item w3-button w3-text-black" href="/news">新聞</a> <a class="w3-bar-item w3-button w3-text-black" href="/curriculum">課表</a> <a class="w3-bar-item w3-button w3-text-black" href="/forum">論壇</a> <a class="w3-bar-item w3-button w3-text-black" href="/product">產品</a> <a class="w3-bar-item w3-button w3-text-black w3-right" href="/me"><i class="fas fa-user-circle" style="font-size: 1.5rem;"></i></a>
        </div>
        <table>
            <tr>
                <th>課表</th>
                <th id="wk"></th>
            </tr>
            <tr class="row">
                <th class="time">08:10~09:00</th>
                <td class="lesson"></td>
            </tr>
            <tr class="row">
                <th class="time">09:10~10:00</th>
                <td class="lesson"></td>
            </tr>
            <tr class="row">
                <th class="time">10:10~11:00</th>
                <td class="lesson"></td>
            </tr>
            <tr class="row">
                <th class="time">11:10~12:00</th>
                <td class="lesson"></td>
            </tr>
            <tr class="row">
                <th class="time">13:00~13:50</th>
                <td class="lesson"></td>
            </tr>
            <tr class="row">
                <th class="time">14:00~14:50</th>
                <td class="lesson"></td>
            </tr>
            <tr class="row">
                <th class="time">15:10~16:00</th>
                <td class="lesson"></td>
            </tr>
            <tr class="row">
                <th class="time">16:10~17:00</th>
                <td class="lesson"></td>
            </tr>
            <tr class="now">
                <td colspan="2" id="afterSchool"></td>
            </tr>
        </table>
    </div>
    <div class="footer w3-container w3-white">
        <span>Copyright © 2019 HSNU <b class="BlueGradient" style="color: royalblue;">1481</b>.<br>
        All rights reserved.</span>
    </div>
    <script>
        var days = ["週日", "週一", "週二", "週三", "週四", "週五", "週六"];
        placeCurriculum();
        var row = document.getElementsByClassName("row");
        var time = document.getElementsByClassName("time");
        var lesson = document.getElementsByClassName("lesson");
        
        function placeCurriculum() {
            fetch("curriculums/108.1.json").then(r => r.json()).then(a => {
                let standard = [
                    [810, 900],
                    [910, 1000],
                    [1010, 1100],
                    [1110, 1200],
                    [1300, 1350],
                    [1400, 1450],
                    [1510, 1600],
                    [1610, 1700]
                ];
                let d = moment().day();
                document.getElementById("wk").innerHTML = days[d];
                let n = moment().hour() * 100 + moment().minute();
                let nl;
                for (var i = 0; i < standard.length; i++)
                    if (standard[i][0] <= n && standard[i][1] > n) nl = i;
                for (var i = 0; i < a[d].length; i++) {
                    if(i < nl) row[i].classList.add("passed");
                    if(i == nl) row[i].classList.add("now");
                    else row[i].classList.remove("now");
                    time[i].innerHTML = ("" + parseInt(standard[i][0] / 100)).padStart(2, "0") + ":" + String(standard[i][0] % 100).padStart(2, "0") + "~" + ("" + parseInt(standard[i][1] / 100)).padStart(2, "0") + ":" + String(standard[i][1] % 100).padStart(2, "0");
                    lesson[i].innerHTML = a[d][i];
                }
            });
        }
    </script>
    <script src="https://instant.page/1.2.2" type="module">
</body>
</html>
